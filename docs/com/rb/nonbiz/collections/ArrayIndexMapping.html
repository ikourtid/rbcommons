<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (15) on Tue Apr 09 21:31:06 EDT 2024 -->
<title>ArrayIndexMapping</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-04-09">
<meta name="description" content="declaration: package: com.rb.nonbiz.collections, interface: ArrayIndexMapping">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":18,"i1":18,"i2":6,"i3":6,"i4":6,"i5":18,"i6":18,"i7":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.rb.nonbiz.collections</a></div>
<h1 title="Interface ArrayIndexMapping" class="title">Interface ArrayIndexMapping&lt;T&gt;</h1>
</div>
<section class="description">
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="SimpleArrayIndexMapping.html" title="class in com.rb.nonbiz.collections">SimpleArrayIndexMapping</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="type-name-label">ArrayIndexMapping&lt;T&gt;</span></pre>
<div class="block">A map is a mapping of key to value. In the case of an immutable map (which is the only type of map we really use
 in this codebase), the collection of values can be compacted into an array. You can further break down this map abstraction:
 <ol type="a">
   <li> The mapping from key to consecutive ints starting at 0 (i.e. array indices). </li>
   <li> A sequential collection of values being mapped (effectively a mapping of int to value). </li>
 </ol>

 <p> This class represents just (a). </p>

 <p> If we share only the mapping part across multiple maps, then each map effectively is an array, plus a
 pointer to the <a href="ArrayIndexMapping.html" title="interface in com.rb.nonbiz.collections"><code>ArrayIndexMapping</code></a>. This trick allows us to create of maps that are: </p>
 <ol type="a">
   <li> More memory-efficient: all the objects are in an array (i.e. consecutive). </li>
   <li> Faster, because there are no map lookups (even O(1) ones like in a hashmap) - only array lookups
        (in the cases where we know the int positions - e.g. because we stored them). </li>
    <li> Possibly faster, if the implementing class does some tricks to make lookup faster. This is the case with
    <code>MarketDaysIntMapping</code>. </li>
 </ol>

 <p> In particular, this allows us to create a 2-dimensional map (or more dimensions) where we can look up entries
 by two keys (not necessarily numeric), instead of by 2 numeric indices like with a 2-d array.
 </p>

 <p> The various classes with 'IndexableArray' in their name use this. </p>

 <p> Of course, this is only applicable when the keys are unique. </p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">All Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t3" class="table-tab" onclick="show(4);">Abstract Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t5" class="table-tab" onclick="show(16);">Default Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Method</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code>default boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#containsKey(T)">containsKey</a></span>&#8203;(<a href="ArrayIndexMapping.html" title="type parameter in ArrayIndexMapping">T</a>&nbsp;key)</code></th>
<td class="col-last">
<div class="block">Return true iff the arrayIndexMapping contains the key, otherwise returns false.</div>
</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code>default java.util.List&lt;<a href="ArrayIndexMapping.html" title="type parameter in ArrayIndexMapping">T</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getAllKeys()">getAllKeys</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code>int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getIndexOrThrow(T)">getIndexOrThrow</a></span>&#8203;(<a href="ArrayIndexMapping.html" title="type parameter in ArrayIndexMapping">T</a>&nbsp;key)</code></th>
<td class="col-last">
<div class="block">This must throw if the key is not in the mapping.</div>
</td>
</tr>
<tr class="row-color" id="i3">
<td class="col-first"><code><a href="ArrayIndexMapping.html" title="type parameter in ArrayIndexMapping">T</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getKey(int)">getKey</a></span>&#8203;(int&nbsp;index)</code></th>
<td class="col-last">
<div class="block">This must throw if numeric index does not appear in the mapping.</div>
</td>
</tr>
<tr class="alt-color" id="i4">
<td class="col-first"><code>java.util.OptionalInt</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getOptionalIndex(T)">getOptionalIndex</a></span>&#8203;(<a href="ArrayIndexMapping.html" title="type parameter in ArrayIndexMapping">T</a>&nbsp;key)</code></th>
<td class="col-last">
<div class="block">This returns OptionalInt.empty() if the key is not in the mapping.</div>
</td>
</tr>
<tr class="row-color" id="i5">
<td class="col-first"><code>default boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#isEmpty()">isEmpty</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i6">
<td class="col-first"><code>default boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#isTrivialIdentityMapping()">isTrivialIdentityMapping</a></span>()</code></th>
<td class="col-last">
<div class="block">Only for the cases where the generic type T implements <a href="../math/vectorspaces/IsArrayIndex.html" title="interface in com.rb.nonbiz.math.vectorspaces"><code>IsArrayIndex</code></a>
 and this object is non-empty, this will return true if the mapping is the identity function,
 i.e.</div>
</td>
</tr>
<tr class="row-color" id="i7">
<td class="col-first"><code>int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#size()">size</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getKey(int)">
<h3>getKey</h3>
<div class="member-signature"><span class="return-type"><a href="ArrayIndexMapping.html" title="type parameter in ArrayIndexMapping">T</a></span>&nbsp;<span class="member-name">getKey</span>&#8203;(<span class="parameters">int&nbsp;index)</span></div>
<div class="block">This must throw if numeric index does not appear in the mapping.</div>
</section>
</li>
<li>
<section class="detail" id="getIndexOrThrow(T)">
<h3 id="getIndexOrThrow(java.lang.Object)">getIndexOrThrow</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="member-name">getIndexOrThrow</span>&#8203;(<span class="parameters"><a href="ArrayIndexMapping.html" title="type parameter in ArrayIndexMapping">T</a>&nbsp;key)</span></div>
<div class="block">This must throw if the key is not in the mapping.</div>
</section>
</li>
<li>
<section class="detail" id="getOptionalIndex(T)">
<h3 id="getOptionalIndex(java.lang.Object)">getOptionalIndex</h3>
<div class="member-signature"><span class="return-type">java.util.OptionalInt</span>&nbsp;<span class="member-name">getOptionalIndex</span>&#8203;(<span class="parameters"><a href="ArrayIndexMapping.html" title="type parameter in ArrayIndexMapping">T</a>&nbsp;key)</span></div>
<div class="block">This returns OptionalInt.empty() if the key is not in the mapping. Otherwise, it returns the index.</div>
</section>
</li>
<li>
<section class="detail" id="size()">
<h3>size</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="member-name">size</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isEmpty()">
<h3>isEmpty</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">isEmpty</span>()</div>
</section>
</li>
<li>
<section class="detail" id="containsKey(T)">
<h3 id="containsKey(java.lang.Object)">containsKey</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">containsKey</span>&#8203;(<span class="parameters"><a href="ArrayIndexMapping.html" title="type parameter in ArrayIndexMapping">T</a>&nbsp;key)</span></div>
<div class="block">Return true iff the arrayIndexMapping contains the key, otherwise returns false.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>key</code> - </dd>
<dt>Returns:</dt>
<dd>true or false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAllKeys()">
<h3>getAllKeys</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">java.util.List&lt;<a href="ArrayIndexMapping.html" title="type parameter in ArrayIndexMapping">T</a>&gt;</span>&nbsp;<span class="member-name">getAllKeys</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isTrivialIdentityMapping()">
<h3>isTrivialIdentityMapping</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">isTrivialIdentityMapping</span>()</div>
<div class="block">Only for the cases where the generic type T implements <a href="../math/vectorspaces/IsArrayIndex.html" title="interface in com.rb.nonbiz.math.vectorspaces"><code>IsArrayIndex</code></a>
 and this object is non-empty, this will return true if the mapping is the identity function,
 i.e. number N maps to array position N.

 <p> We also check that all keys are of the same class. </p>

 <p> Note that this will return false if the mapping is empty, just to be safe, since (due to the way Java
 type erasure works) we'd have no way of checking what type T is. </p></div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../math/vectorspaces/IsArrayIndex.html" title="interface in com.rb.nonbiz.math.vectorspaces"><code>IsArrayIndex</code></a></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
</footer>
</div>
</div>
</body>
</html>

<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (15) on Tue Apr 09 21:31:06 EDT 2024 -->
<title>ClosedUnitFractionHardAndSoftRange</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-04-09">
<meta name="description" content="declaration: package: com.rb.nonbiz.types, class: ClosedUnitFractionHardAndSoftRange">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":10,"i1":9,"i2":9,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.rb.nonbiz.types</a></div>
<h1 title="Class ClosedUnitFractionHardAndSoftRange" class="title">Class ClosedUnitFractionHardAndSoftRange</h1>
</div>
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">com.rb.nonbiz.types.ClosedUnitFractionHardAndSoftRange</div>
</div>
<section class="description">
<hr>
<pre>public class <span class="type-name-label">ClosedUnitFractionHardAndSoftRange</span>
extends java.lang.Object</pre>
<div class="block">A version of <a href="HardAndSoftRange.html" title="class in com.rb.nonbiz.types"><code>HardAndSoftRange</code></a> that's specialized for <a href="UnitFraction.html" title="class in com.rb.nonbiz.types"><code>UnitFraction</code></a>.

 <p> See <a href="HardAndSoftRange.html" title="class in com.rb.nonbiz.types"><code>HardAndSoftRange</code></a> for an explanation of the 'hard and soft range' concept. </p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">All Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="table-tab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="table-tab" onclick="show(8);">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Method</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code><a href="HardAndSoftRange.html" title="class in com.rb.nonbiz.types">HardAndSoftRange</a>&lt;<a href="UnitFraction.html" title="class in com.rb.nonbiz.types">UnitFraction</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#asGeneralHardAndSoftRange()">asGeneralHardAndSoftRange</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code>static <a href="ClosedUnitFractionHardAndSoftRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionHardAndSoftRange</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#closedUnitFractionHardAndPossiblySameSoftRange(com.rb.nonbiz.types.ClosedUnitFractionRange,com.rb.nonbiz.types.ClosedUnitFractionRange)">closedUnitFractionHardAndPossiblySameSoftRange</a></span>&#8203;(<a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a>&nbsp;hardRange,
<a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a>&nbsp;softRange)</code></th>
<td class="col-last">
<div class="block">This is for the rare cases where we want to allow hard = soft range (see usages of this method),
 or, more generally, if only the upper or lower bound are the same (although admittedly this method name would
 be a misnomer in the latter case).</div>
</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code>static <a href="ClosedUnitFractionHardAndSoftRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionHardAndSoftRange</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#closedUnitFractionHardAndSoftRange(com.rb.nonbiz.types.ClosedUnitFractionRange,com.rb.nonbiz.types.ClosedUnitFractionRange)">closedUnitFractionHardAndSoftRange</a></span>&#8203;(<a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a>&nbsp;hardRange,
<a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a>&nbsp;softRange)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i3">
<td class="col-first"><code><a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getHardRange()">getHardRange</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i4">
<td class="col-first"><code><a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getSoftRange()">getSoftRange</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i5">
<td class="col-first"><code>boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#isUnrestricted()">isUnrestricted</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i6">
<td class="col-first"><code><a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#tightenToSoftOrCurrent(com.rb.nonbiz.types.UnitFraction)">tightenToSoftOrCurrent</a></span>&#8203;(<a href="UnitFraction.html" title="class in com.rb.nonbiz.types">UnitFraction</a>&nbsp;pointToInclude)</code></th>
<td class="col-last">
<div class="block">Returns a <a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types"><code>ClosedUnitFractionRange</code></a> using the following rules:</div>
</td>
</tr>
<tr class="row-color" id="i7">
<td class="col-first"><code>java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#toString()">toString</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Object">Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="closedUnitFractionHardAndSoftRange(com.rb.nonbiz.types.ClosedUnitFractionRange,com.rb.nonbiz.types.ClosedUnitFractionRange)">
<h3>closedUnitFractionHardAndSoftRange</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="ClosedUnitFractionHardAndSoftRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionHardAndSoftRange</a></span>&nbsp;<span class="member-name">closedUnitFractionHardAndSoftRange</span>&#8203;(<span class="parameters"><a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a>&nbsp;hardRange,
<a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a>&nbsp;softRange)</span></div>
</section>
</li>
<li>
<section class="detail" id="closedUnitFractionHardAndPossiblySameSoftRange(com.rb.nonbiz.types.ClosedUnitFractionRange,com.rb.nonbiz.types.ClosedUnitFractionRange)">
<h3>closedUnitFractionHardAndPossiblySameSoftRange</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="ClosedUnitFractionHardAndSoftRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionHardAndSoftRange</a></span>&nbsp;<span class="member-name">closedUnitFractionHardAndPossiblySameSoftRange</span>&#8203;(<span class="parameters"><a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a>&nbsp;hardRange,
<a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a>&nbsp;softRange)</span></div>
<div class="block">This is for the rare cases where we want to allow hard = soft range (see usages of this method),
 or, more generally, if only the upper or lower bound are the same (although admittedly this method name would
 be a misnomer in the latter case).</div>
</section>
</li>
<li>
<section class="detail" id="getHardRange()">
<h3>getHardRange</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a></span>&nbsp;<span class="member-name">getHardRange</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getSoftRange()">
<h3>getSoftRange</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a></span>&nbsp;<span class="member-name">getSoftRange</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isUnrestricted()">
<h3>isUnrestricted</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">isUnrestricted</span>()</div>
</section>
</li>
<li>
<section class="detail" id="tightenToSoftOrCurrent(com.rb.nonbiz.types.UnitFraction)">
<h3>tightenToSoftOrCurrent</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types">ClosedUnitFractionRange</a></span>&nbsp;<span class="member-name">tightenToSoftOrCurrent</span>&#8203;(<span class="parameters"><a href="UnitFraction.html" title="class in com.rb.nonbiz.types">UnitFraction</a>&nbsp;pointToInclude)</span></div>
<div class="block">Returns a <a href="ClosedUnitFractionRange.html" title="class in com.rb.nonbiz.types"><code>ClosedUnitFractionRange</code></a> using the following rules:

 <p> If the point is outside the hard range, then return the soft range. </p>

 <p> If the point is within the soft range, then return the soft range. </p>

 <p>If the point is between the soft and hard range, return the soft range expanded to include the point. </p>

 <p> The business case is the following. Assume a soft range of [14%, 26%] and a hard range of [10%, 30%]. </p>

 <p> If the current position is e.g. 32%, we want to sell it all the way to 26%, not to 30%. </p>

 <ul>
  <li>
    If the current position is too high, and above the hard limit (e.g. 35%), then we want to sell it down to be
    within the soft range, so no more than 26%. The reason why we don't sell just to within the hard range
    (i.e. down to 30%) is that, if we were to do that, then the next time we consider trading, this position could go
    above 30% due to market drift, even if we don't trade, and we wouldn't want to sell yet again.
    In other words, we want to slightly over-shoot the hard limit,
    so we won't have to immediately trade again due to price fluctuations.
   </li>
   <li>
     If the current position is within the soft range (e.g. 22%), then we will return the soft range. We don't want
     it to go above 26%, so we'll use that as a max since the returned range will be [14%, 26%].
   </li>
   <li>
     If the current position is outside the soft range BUT within the hard range (e.g. 27%), then we don't want to
     buy more and increase it, but we don't necessarily want to sell.
   </li>
 </ul>

 <p> The above discussion is for cases where pointToInclude is above the upper bounds of one or both of the ranges,
 but the same applies (symmetrically) for the case where pointToInclude is below the lower bound. </p>

 <p> In that case, effectively the semantics are
 "sell a lot if very misallocated; do not buy more if somewhat overweight; buy up to soft max otherwise". </p>

 <p> This may make more sense in the tests. </p></div>
</section>
</li>
<li>
<section class="detail" id="asGeneralHardAndSoftRange()">
<h3>asGeneralHardAndSoftRange</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="HardAndSoftRange.html" title="class in com.rb.nonbiz.types">HardAndSoftRange</a>&lt;<a href="UnitFraction.html" title="class in com.rb.nonbiz.types">UnitFraction</a>&gt;</span>&nbsp;<span class="member-name">asGeneralHardAndSoftRange</span>()</div>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name">toString</span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
</footer>
</div>
</div>
</body>
</html>
